<!doctype html>
<html>
    <head>
        <title>FSHS Robotics</title>
        <meta name="google-site-verification" content="4_RMTp03qKZnXNroL0gme91C1A0V24nC9np8xE_GRt4" />
        <link rel="icon" type="image/png" href="/theme/favicon.png">
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="theme-color" content="#4060fa" />
        <link type="text/css" rel="stylesheet" href="/theme/robobase.css"/>
        <link type="text/css" rel="stylesheet" href="/theme/2018base.css"/>
        <link type="text/css" rel="stylesheet" href="/theme/friendly.css"/>
        <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700|Raleway:400,900|PT+Mono">
    </head>

<body>
    <div class="header-2018">
        <h2><a href="/">FSHS Robotics</a></h2>
        <div id="nav">
            <ul class="nav-transparent">
                <li class="nav-transparent__link"><a href="/about">About</a></li>
                <li class="nav-transparent__link"><a href="/awards">Awards</a></li>
                <li class="nav-transparent__link"><a href="/resources">Resources</a></li>
                <li class="nav-transparent__link"><a href="/equipment">Admin</a></li>

            </ul>
        </div>
    </div>
<div id="wrapper">

    <div class="wiki" id="content_view" style="display: block;">
    <div class="learn-wrapper">
    <div class="hero full-width">
    <a class="hero-back" href="/c-course/">Back to C Course</a>
    <h3>FSHS Robotics C Course</h3>
    <h1>8. Sonar</h1>
    </div>
    
    <div class="learn-contents-text" style="grid-column: 1/4">
    <h2 id="81-the-ultrasonic-sensor">8.1 The ultrasonic sensor</h2>
<p>An <strong>ultrasonic sensor</strong> ('sonar') works by transmitting and receiving ultrasonic sound - sound with a frequency above human hearing. By recording the time it takes for the sound wave to bounce off an object and return to the sensor, we can approximate the distance.</p>
<p>The EV3 sensor has two 'eyes' - one is the transmitter and the other is the reciever. When you play around with it, you will get a raw value from around 1 to 255. This doesn't quite equate to millimetres, so you should not use a ruler to make measurements - use the sensor itself!</p>
<p>You may also notice that the sensor is less accurate in measuring distances to objects very close and very far away. Play around by printing the value on the screen and observing values</p>
<h2 id="82-using-robotc">8.2 Using RobotC</h2>
<p>Set up the sensor by choosing the correct port and selecting Ultrasonic (EV3):</p>
<p><img src="../../c-course/sonar/sonar.png" style="max-width:500px;width:100%" /></p>
<p>Simply use <code>SensorValue[sonar]</code> to get the value:  </p>
<div class="highlight"><pre><span></span><code><span class="cp">#pragma config(Sensor, S2,     sonar,          sensorEV3_Ultrasonic)</span>
<span class="c1">//*!!Code automatically generated by &#39;ROBOTC&#39; configuration wizard               !!*//</span>

<span class="n">task</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// create the variables</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">distance</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Repeatedly do what is in the brackets</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Record the value into our distance variable</span>
<span class="w">        </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SensorValue</span><span class="p">[</span><span class="n">sonar</span><span class="p">];</span>

<span class="w">        </span><span class="c1">// Print it on the 4th line of the screen</span>
<span class="w">        </span><span class="n">displayCenteredTextLine</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">distance</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
    </div>
        <div class="learn-contents-navigate full-width">
            <a class="previous" href="/c-course/making-sounds">Making Sounds</a>
            <a class="next" href="#">Coming soon</a>
            <div class="separator"></div>
        </div>
    </div>
</div>
<div id="mainFooter">
<p>&copy; Fort Street High School Robotics</p>
</div>
</div>
</body>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <!-- Firebase - Equipment System -->
    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/4.8.0/firebase.js"></script>
    <script type="text/javascript" src="/file/equipmentsystem.js"></script>
    <link type="text/css" rel="stylesheet" href="/file/equipmentsystem.css"/>
</html>